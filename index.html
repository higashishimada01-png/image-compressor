<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像圧縮ツールくん - 安全・爆速な画像軽量化ツール</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Noto+Sans+JP:wght@400;700;900&display=swap');
        
        :root {
            --brand-blue: #3b82f6;
            --brand-indigo: #6366f1;
        }

        body { 
            font-family: 'Plus Jakarta Sans', 'Noto Sans JP', sans-serif;
            background-color: #fcfdfe;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--brand-blue), var(--brand-indigo));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .step-pill {
            background: white;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .step-pill:hover {
            border-color: var(--brand-blue);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Lucide風アイコン ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const icons = {
                Upload: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>,
                Download: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
                Shield: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
                Zap: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
                Check: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>,
                Lock: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
                Server: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>,
                ArrowRight: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            };
            return icons[name] || null;
        };

        const Button = ({ children, onClick, variant = 'primary', className = '' }) => {
            const baseStyle = "font-bold rounded-2xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2 px-8 py-4 shadow-sm";
            const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-blue-100 hover:shadow-xl hover:shadow-blue-200",
                secondary: "bg-white border border-gray-200 hover:border-blue-400 text-gray-700 hover:text-blue-600 hover:shadow-lg"
            };
            return <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>{children}</button>;
        };

        function App() {
            const [currentPage, setCurrentPage] = useState('home');
            const [files, setFiles] = useState([]);
            const [isProcessing, setIsProcessing] = useState(false);
            const [dragActive, setDragActive] = useState(false);
            const fileInputRef = useRef(null);

            useEffect(() => { window.scrollTo({top: 0, behavior: 'smooth'}); }, [currentPage]);

            const compressImage = async (file) => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = (event) => {
                        const img = new Image();
                        img.src = event.target.result;
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            canvas.width = img.width;
                            canvas.height = img.height;
                            ctx.drawImage(img, 0, 0);
                            const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                            const head = 'data:image/jpeg;base64,';
                            const size = Math.round((compressedDataUrl.length - head.length) * 3 / 4);
                            resolve({
                                id: Math.random().toString(36).substr(2, 9),
                                fileName: file.name.replace(/\.[^/.]+$/, "") + ".jpg",
                                originalSize: file.size,
                                compressedSize: size,
                                preview: compressedDataUrl
                            });
                        };
                    };
                });
            };

            const handleFiles = async (fileList) => {
                if (fileList.length === 0) return;
                setIsProcessing(true);
                const processed = await Promise.all(Array.from(fileList).map(compressImage));
                setFiles(prev => [...processed, ...prev]);
                setIsProcessing(false);
            };

            const formatSize = (bytes) => {
                if (bytes === 0) return '0 B';
                const i = Math.floor(Math.log(bytes) / Math.log(1024));
                return parseFloat((bytes / Math.pow(1024, i)).toFixed(1)) + ' ' + ['B', 'KB', 'MB', 'GB'][i];
            };

            const HomeView = () => (
                <div className="space-y-24">
                    {/* Hero Section */}
                    <section className="text-center pt-10 pb-4">
                        <div className="inline-flex items-center gap-2 bg-blue-50 text-blue-600 px-4 py-2 rounded-full text-sm font-bold mb-8 animate-fade-in">
                            <Icon name="Shield" size={16} />
                            <span>100% プライバシー保護・ブラウザ完結型</span>
                        </div>
                        <h2 className="text-5xl md:text-7xl font-black mb-8 leading-[1.15] text-gray-900 tracking-tight">
                            画像を<span className="gradient-text italic">ギュッ！</span>と<br/>一瞬で軽くする。
                        </h2>
                        <p className="text-gray-500 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed mb-12">
                            重い写真も、このツールなら品質を保ったまま最適化。<br/>
                            画像は一瞬たりともサーバーに送られないから、<span className="text-gray-900 font-bold underline decoration-blue-300">究極に安全</span>です。
                        </p>

                        <div className="flex flex-wrap justify-center gap-4 mb-16">
                            {[
                                { s: 1, t: "えらぶ" },
                                { s: 2, t: "かるくなる" },
                                { s: 3, t: "のこす" }
                            ].map(step => (
                                <div key={step.s} className="step-pill px-6 py-3 rounded-2xl flex items-center gap-3">
                                    <span className="w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-black">{step.s}</span>
                                    <span className="font-bold text-gray-700">{step.t}</span>
                                </div>
                            ))}
                        </div>

                        {/* Dropzone */}
                        <div 
                            className={`group relative max-w-3xl mx-auto border-2 border-dashed rounded-[3rem] p-16 md:p-24 transition-all duration-500 cursor-pointer ${dragActive ? 'border-blue-500 bg-blue-50/50 scale-[1.02]' : 'border-gray-200 bg-white hover:border-blue-400 hover:shadow-2xl hover:shadow-blue-100'}`}
                            onDragOver={(e) => {e.preventDefault(); setDragActive(true);}}
                            onDragLeave={() => setDragActive(false)}
                            onDrop={(e) => {e.preventDefault(); setDragActive(false); handleFiles(e.dataTransfer.files);}}
                            onClick={() => fileInputRef.current.click()}
                        >
                            <input ref={fileInputRef} type="file" multiple accept="image/*" className="hidden" onChange={(e) => handleFiles(e.target.files)} />
                            <div className="w-24 h-24 bg-gradient-to-tr from-blue-600 to-indigo-500 text-white rounded-[2rem] flex items-center justify-center mx-auto mb-8 shadow-xl group-hover:rotate-6 transition-transform">
                                {isProcessing ? <Icon name="Zap" className="animate-spin" size={40} /> : <Icon name="Upload" size={40} />}
                            </div>
                            <h3 className="text-2xl font-black text-gray-900 mb-3">ここに画像をドロップ</h3>
                            <p className="text-gray-400 font-medium">またはクリックしてファイルを選択</p>
                        </div>
                    </section>

                    {/* Results */}
                    {files.length > 0 && (
                        <section className="animate-fade-in space-y-6">
                            <div className="flex items-center gap-3 bg-green-50 text-green-700 p-6 rounded-[2rem] border border-green-100 shadow-sm">
                                <div className="bg-green-500 text-white p-1 rounded-full"><Icon name="Check" size={16} /></div>
                                <span className="font-bold">圧縮が完了しました！</span>
                            </div>
                            <div className="grid gap-4">
                                {files.map(file => (
                                    <div key={file.id} className="bg-white rounded-[2.5rem] p-6 shadow-sm border border-gray-100 flex flex-col sm:flex-row items-center gap-8 transition-hover hover:shadow-md">
                                        <img src={file.preview} className="w-24 h-24 object-cover rounded-3xl shadow-inner bg-gray-50" />
                                        <div className="flex-1 min-w-0 text-center sm:text-left">
                                            <p className="font-black text-gray-900 truncate text-xl mb-2">{file.fileName}</p>
                                            <div className="flex flex-wrap justify-center sm:justify-start items-center gap-4">
                                                <span className="text-gray-400 font-medium line-through decoration-gray-300">{formatSize(file.originalSize)}</span>
                                                <Icon name="ArrowRight" size={16} className="text-gray-300" />
                                                <span className="text-blue-600 font-black text-2xl">{formatSize(file.compressedSize)}</span>
                                                <span className="bg-blue-100 text-blue-700 text-xs font-black px-3 py-1 rounded-full">
                                                    -{Math.round((1 - file.compressedSize / file.originalSize) * 100)}%
                                                </span>
                                            </div>
                                        </div>
                                        <Button onClick={() => {
                                            const a = document.createElement('a');
                                            a.href = file.preview; a.download = `min_${file.fileName}`; a.click();
                                        }} className="w-full sm:w-auto">
                                            <Icon name="Download" size={20} />保存する
                                        </Button>
                                    </div>
                                ))}
                            </div>
                        </section>
                    )}

                    {/* Trust Section */}
                    <section className="bg-gray-900 rounded-[4rem] p-12 md:p-20 text-white overflow-hidden relative">
                        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-600/20 blur-[100px] rounded-full"></div>
                        <div className="relative z-10 grid md:grid-cols-2 gap-16 items-center">
                            <div>
                                <h3 className="text-3xl md:text-4xl font-black mb-8 leading-tight">なぜ「安全」と言い切れるのか。</h3>
                                <p className="text-gray-400 text-lg leading-relaxed mb-8">
                                    一般的な圧縮サイトは画像を一度サーバーにアップロードしますが、このツールは<span className="text-white font-bold italic">「ブラウザ完結型」</span>という技術を採用しています。
                                </p>
                                <div className="space-y-6">
                                    {[
                                        { i: "Lock", t: "データ送信ゼロ", d: "画像はあなたのPC/スマホの外へ一歩も出ません。" },
                                        { i: "Zap", t: "履歴が残らない", d: "ページを閉じればすべてのデータは消滅します。" }
                                    ].map((item, idx) => (
                                        <div key={idx} className="flex gap-4">
                                            <div className="text-blue-400 mt-1"><Icon name={item.i} size={24} /></div>
                                            <div>
                                                <h4 className="font-bold text-white mb-1">{item.t}</h4>
                                                <p className="text-sm text-gray-500">{item.d}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="bg-white/5 border border-white/10 p-10 rounded-[3rem] backdrop-blur-sm">
                                <div className="flex flex-col items-center gap-6">
                                    <div className="flex items-center gap-4 w-full">
                                        <div className="w-12 h-12 rounded-2xl bg-blue-600 flex items-center justify-center"><Icon name="Upload" size={24} /></div>
                                        <div className="h-1 flex-1 bg-gray-700 rounded-full overflow-hidden">
                                            <div className="h-full w-1/2 bg-blue-400 animate-pulse"></div>
                                        </div>
                                        <div className="w-12 h-12 rounded-2xl bg-gray-800 flex items-center justify-center"><Icon name="Shield" size={24} /></div>
                                    </div>
                                    <div className="text-center">
                                        <p className="text-sm font-bold text-blue-400 mb-2">SECURITY CHECK: PASSED</p>
                                        <p className="text-xs text-gray-500">あなたのブラウザ内だけで処理されています</p>
                                    </div>
                                    <div className="w-full pt-6 border-t border-white/10 flex justify-around opacity-50">
                                        <div className="text-center"><Icon name="Smartphone" className="mx-auto mb-1"/><span className="text-[10px]">LOCAL</span></div>
                                        <div className="text-center text-red-400 font-black"><Icon name="Server" className="mx-auto mb-1"/><span className="text-[10px]">NO SERVER</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            );

            const OperatorView = () => (
                <div className="animate-fade-in max-w-2xl mx-auto py-10">
                    <div className="bg-white p-12 md:p-16 rounded-[3.5rem] shadow-2xl shadow-blue-50 border border-gray-100">
                        <div className="flex items-center gap-4 mb-10 border-b pb-6">
                            <div className="w-12 h-12 bg-blue-600 text-white rounded-2xl flex items-center justify-center shadow-lg shadow-blue-200">
                                <Icon name="Zap" size={24} />
                            </div>
                            <h2 className="text-3xl font-black text-gray-900">運営者情報</h2>
                        </div>
                        
                        <div className="space-y-10">
                            <div className="bg-gray-50 p-8 rounded-[2rem] border-l-4 border-blue-600">
                                <p className="whitespace-pre-wrap text-gray-700 text-lg leading-loose font-medium">
                                    昭和？年生まれ{"\n"}
                                    画像圧縮ツールがあったらいいなという思いつきから{"\n"}
                                    VercelとGitHubなどをごちょごちょいじって作りました。{"\n"}
                                    見た目はシンプルですが、圧縮率は他に負けない本格性能です。{"\n"}
                                    是非たくさん活用ください！{"\n"}
                                    こんな機能がほしいとか不具合などあれば、{"\n"}
                                    お問い合わせよりいただけると幸いです。
                                </p>
                            </div>
                            
                            <div className="p-10 bg-gray-900 rounded-[2.5rem] text-white group overflow-hidden relative">
                                <div className="absolute bottom-0 right-0 w-32 h-32 bg-blue-600/30 blur-3xl rounded-full translate-x-10 translate-y-10"></div>
                                <h4 className="font-black text-blue-400 uppercase tracking-widest text-xs mb-4">Contact Support</h4>
                                <div className="space-y-2">
                                    <p className="text-gray-400 text-sm font-bold uppercase">E-mail</p>
                                    <p className="text-lg md:text-xl font-mono text-white/90 select-all tracking-tight break-all">
                                        dongshantian674@gmail.com
                                    </p>
                                </div>
                            </div>

                            <div className="text-center">
                                <button onClick={() => setCurrentPage('home')} className="text-blue-600 font-black hover:text-blue-800 flex items-center justify-center gap-2 mx-auto transition-colors">
                                    <Icon name="ArrowRight" size={18} className="rotate-180" />
                                    ホームに戻る
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="sticky top-0 z-50 glass-card border-b">
                        <div className="max-w-5xl mx-auto px-6 h-20 flex items-center justify-between">
                            <button onClick={() => setCurrentPage('home')} className="flex items-center gap-3 group transition-transform active:scale-95">
                                <div className="bg-blue-600 text-white p-2.5 rounded-2xl shadow-lg shadow-blue-100 group-hover:rotate-6 transition-transform">
                                    <Icon name="Zap" size={24} />
                                </div>
                                <span className="text-xl font-black tracking-tight text-gray-900">画像圧縮ツールくん</span>
                            </button>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-5xl mx-auto px-6 py-12 flex-grow w-full">
                        {currentPage === 'home' ? <HomeView /> : <OperatorView />}
                    </main>

                    {/* Footer */}
                    <footer className="max-w-5xl mx-auto px-6 py-16 text-center w-full border-t border-gray-100 mt-24">
                        <div className="flex flex-wrap justify-center gap-x-12 gap-y-4 mb-10 text-gray-400 font-black text-xs uppercase tracking-widest">
                            <button onClick={() => setCurrentPage('home')} className="hover:text-blue-600 transition-colors">Home</button>
                            <button onClick={() => setCurrentPage('operator')} className="hover:text-blue-600 transition-colors">Operator</button>
                            <a href="#" className="hover:text-blue-600 transition-colors">Privacy</a>
                        </div>
                        <p className="text-gray-300 font-bold text-[10px] tracking-[0.3em] uppercase">
                            &copy; 2026 umegaoka-connect.site
                        </p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>